
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Slurm &#8212; HPC  documentation</title>
    
  <link href="_static/css/theme.css" rel="stylesheet">
  <link href="_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-book-theme.css?digest=84ace793992934648b4de8eed757e5a2" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    
  <link rel="preload" as="script" href="_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="_static/sphinx-book-theme.9d8b4a8b9bb19db25eeaddc40d639ba2.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="APP" href="app/index.html" />
    <link rel="prev" title="Login" href="Login.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<div class="col-12 col-md-3 bd-sidebar site-navigation " id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
      
      
      <h1 class="site-logo" id="site-title">HPC  documentation</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Contents:
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="Introduction.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Login.html">
   Login
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Slurm
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="app/index.html">
   APP
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="app/module.html">
     Module
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="app/ai/index.html">
     AI
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
    <label for="toctree-checkbox-2">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="app/ai/pytorch.html">
       pytorch
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="app/ai/tensorflow.html">
       tesnsorflow
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="app/engineer/index.html">
     Engineer
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
    <label for="toctree-checkbox-3">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="app/engineer/RAPIDS.html">
       RAPIDS
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="app/atomic-molecule/index.html">
     Atomic Molecule
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
    <label for="toctree-checkbox-4">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="app/atomic-molecule/Q-CHEM.html">
       Q-CHEM
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="app/atomic-molecule/amber.html">
       Amber
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
   
</div>

</div>


          


          
<!-- This is an invisible pixel that we watch to see if we've scrolled. -->
<div class="sbt-scroll-pixel-helper"></div>
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            <div class="topbar-left">
                
                <label class="nav-toggle-button" for="__navigation">
                    <div class="visually-hidden">Toggle navigation</div>
                    <i class="fas fa-bars"></i>
                </label>
                
            </div>
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/Slurm.rst.txt"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.rst</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#basic-commands">
   Basic commands
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#squeue">
     squeue
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#how-to-run-jobs">
   How to run jobs
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sbatch">
     Sbatch
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#create-a-file">
       1.Create a file
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#applied-resources">
       2.Applied resources
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#submit-batch-script">
       3.Submit batch script
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#srun">
     Srun
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#advice-from-manager">
   Advice From Manager
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#references">
   References
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Slurm</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#basic-commands">
   Basic commands
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#squeue">
     squeue
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#how-to-run-jobs">
   How to run jobs
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sbatch">
     Sbatch
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#create-a-file">
       1.Create a file
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#applied-resources">
       2.Applied resources
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#submit-batch-script">
       3.Submit batch script
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#srun">
     Srun
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#advice-from-manager">
   Advice From Manager
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#references">
   References
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="section" id="slurm">
<h1>Slurm<a class="headerlink" href="#slurm" title="Permalink to this headline">¶</a></h1>
<p>Slurm is an open source, fault-tolerant, and highly scalable cluster management and job scheduling system for large and small Linux clusters. We use Slurm as resource scheduler in two clusters.</p>
<div class="section" id="basic-commands">
<h2>Basic commands<a class="headerlink" href="#basic-commands" title="Permalink to this headline">¶</a></h2>
<table class="table">
<colgroup>
<col style="width: 11%" />
<col style="width: 89%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>sbatch</p></td>
<td><p>submit a job script for later execution</p></td>
</tr>
<tr class="row-odd"><td><p>scancel</p></td>
<td><p>cancel a pending or running job or job step</p></td>
</tr>
<tr class="row-even"><td><p>sacct</p></td>
<td><p>report job or job step accounting information about active or completed jobs</p></td>
</tr>
<tr class="row-odd"><td><p>scontrol</p></td>
<td><p>view and/or modify Slurm state</p></td>
</tr>
<tr class="row-even"><td><p>sinfo</p></td>
<td><p>reports the state of partitions and nodes managed by Slurm</p></td>
</tr>
<tr class="row-odd"><td><p>squeue</p></td>
<td><p>reports the state of jobs or job steps</p></td>
</tr>
<tr class="row-even"><td><p>srun</p></td>
<td><p>submit a job for execution or initiate job steps in real time</p></td>
</tr>
</tbody>
</table>
<div class="section" id="squeue">
<h3>squeue<a class="headerlink" href="#squeue" title="Permalink to this headline">¶</a></h3>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>squeue -j jobid</p></td>
<td><p>print infomation about job jobid</p></td>
</tr>
<tr class="row-odd"><td><p>squeue -n HOST</p></td>
<td><p>print information about job running on HOST</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="how-to-run-jobs">
<h2>How to run jobs<a class="headerlink" href="#how-to-run-jobs" title="Permalink to this headline">¶</a></h2>
<p><strong>Frequented parameters</strong></p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 32%" />
<col style="width: 68%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>-n [count]</p></td>
<td><p>total processes</p></td>
</tr>
<tr class="row-odd"><td><p>–ntasks-per-node=[count]</p></td>
<td><p>total processed per node</p></td>
</tr>
<tr class="row-even"><td><p>-p [partition]</p></td>
<td><p>partition name</p></td>
</tr>
<tr class="row-odd"><td><p>–job-name=[name]</p></td>
<td><p>job name</p></td>
</tr>
<tr class="row-even"><td><p>–output=[file_name]</p></td>
<td><p>output result log</p></td>
</tr>
<tr class="row-odd"><td><p>–error=[file_name]</p></td>
<td><p>ouput error log</p></td>
</tr>
<tr class="row-even"><td><p>–time=[dd-hh:mm:ss]</p></td>
<td><p>limited time of the job allocation</p></td>
</tr>
<tr class="row-odd"><td><p>–mail-type=[type]</p></td>
<td><p>Notify user by email when certain event types occur</p></td>
</tr>
<tr class="row-even"><td><p>–mail-user=[mail_address]</p></td>
<td><p>User to receive email notification of state changes as defined by –mail-type</p></td>
</tr>
<tr class="row-odd"><td><p>–nodelist=[nodes]</p></td>
<td><p>Request a specific list of hosts</p></td>
</tr>
<tr class="row-even"><td><p>–exclusive=[nodes]</p></td>
<td><p>The job allocation can not share nodes with other running jobs</p></td>
</tr>
<tr class="row-odd"><td><p>–array=[array_spec]</p></td>
<td><p>Submit a job array, multiple jobs to be executed with identical parameters</p></td>
</tr>
<tr class="row-even"><td><p>–gres=gpu:numbers</p></td>
<td><p>Specifies a comma-delimited list of generic gpu resources</p></td>
</tr>
</tbody>
</table>
<div class="section" id="sbatch">
<h3>Sbatch<a class="headerlink" href="#sbatch" title="Permalink to this headline">¶</a></h3>
<p>Sbatch submits a batch script to Slurm. The batch script can be given to sbatch through a file name on the command line. The batch script may contain options preceded with “#SBATCH” before any executable commands in the script. sbatch will stop processing further #SBATCH directives once the first non-comment non-whitespace line has been reached in the script.</p>
<div class="section" id="create-a-file">
<h4>1.Create a file<a class="headerlink" href="#create-a-file" title="Permalink to this headline">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>touch<span class="w"> </span>run.slurm
</pre></div>
</div>
</div>
<div class="section" id="applied-resources">
<h4>2.Applied resources<a class="headerlink" href="#applied-resources" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">If</span> <span class="pre">you</span> <span class="pre">want</span> <span class="pre">to</span> <span class="pre">run</span> <span class="pre">software</span> <span class="pre">with</span> <span class="pre">GPU</span> <span class="pre">node</span></code></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1">#SBATCH --job-name=gpu</span>
<span class="c1">#SBATCH --partition=gpu</span>
<span class="c1">#SBATCH -n 1                  #total nodes</span>
<span class="c1">#SBATCH --ntasks-per-node=1   #total processes per node</span>
<span class="c1">#SBATCH --gres=gpu:1          #total gpus</span>
<span class="c1">#SBATCH --output=%j.out</span>
<span class="c1">#SBATCH --error=%j.err</span>

mpirun<span class="w"> </span>exec.file
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">If</span> <span class="pre">you</span> <span class="pre">want</span> <span class="pre">to</span> <span class="pre">run</span> <span class="pre">software</span> <span class="pre">with</span> <span class="pre">multiple</span> <span class="pre">node</span></code></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1">#SBATCH --job-name=mpi</span>
<span class="c1">#SBATCH --partition=parallel</span>
<span class="c1">#SBATCH -N 2                  #total nodes</span>
<span class="c1">#SBATCH --exclusive</span>
<span class="c1">#SBATCH --output=%j.out</span>
<span class="c1">#SBATCH --error=%j.err</span>

mpirun<span class="w"> </span>exec.file
</pre></div>
</div>
</div>
<div class="section" id="submit-batch-script">
<h4>3.Submit batch script<a class="headerlink" href="#submit-batch-script" title="Permalink to this headline">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sbatch<span class="w"> </span>run.slurm
</pre></div>
</div>
</div>
</div>
<div class="section" id="srun">
<h3>Srun<a class="headerlink" href="#srun" title="Permalink to this headline">¶</a></h3>
<p>Run a parallel job on cluster managed by Slurm. If necessary, srun will first create a resource allocation in which to run the parallel job.</p>
<p><strong>Running example</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>srun<span class="w"> </span>--partition<span class="o">=</span>parallel<span class="w">  </span>--nodes<span class="o">=</span><span class="m">1</span><span class="w"> </span>--ntasks<span class="o">=</span><span class="m">6</span><span class="w"> </span>hostname
</pre></div>
</div>
</div>
</div>
<div class="section" id="advice-from-manager">
<h2>Advice From Manager<a class="headerlink" href="#advice-from-manager" title="Permalink to this headline">¶</a></h2>
<p>We hope that you can use sbatch to submit jobs, you just need to submit your job to backend, and then you can close you termimal freely.
If you use srun to running job, when you terminal are closed, your job will be cancelled.</p>
</div>
<div class="section" id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://slurm.schedmd.com/documentation.html">Slurm Website</a></p>
</div>
</div>


              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="Login.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Login</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="app/index.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">APP</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By NYU<br/>
    
        &copy; Copyright NYU.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>